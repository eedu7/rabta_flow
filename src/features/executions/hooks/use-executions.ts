import { useSuspenseQuery } from "@tanstack/react-query";
import { useExecutionsParams } from "@/features/executions/hooks/use-executions-params";
import { useTRPC } from "@/trpc/client";

/**
 * Hook to fetch all executions using suspense
 * */
export function useSuspenseExecutions() {
    const trpc = useTRPC();
    const [params] = useExecutionsParams();

    return useSuspenseQuery(trpc.executions.getMany.queryOptions(params));
}

/**
 * Hook to fetch a single execution using suspense
 * */
export function useSuspenseExecution(id: string) {
    const trpc = useTRPC();

    return useSuspenseQuery(
        trpc.executions.getOne.queryOptions({
            id,
        }),
    );
}
